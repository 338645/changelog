Release 5.3.4
------------------

This maintenance release fixes several corner-case defects in the asynchronous HTTP/1.1 protocol
handler as well as several other minor defects.


Change Log
-------------------

* HTTPCORE-778: URIBuilder to not encode sub-delimiters in URI fragment component for consistency
  with query component encoding
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Fixed a race condition in the async message stream handlers that can occur when
  a message with no content body is being submitted asynchronously.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Async message stream handlers to avoid firing data produce events from multiple
  threads.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* HTTPCORE-777: I/O reactor to cancel out incomplete connect requests when shutting down.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Resource release corrections and code improvements in the base implementations of client
  and server async exchange handlers.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Corrected the state management in the async HTTP/1.1 protocol handler when
  committing requests asynchronously.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug-fix: Corrected message stream termination by the async HTTP/1.1 protocol handler
  when the connection has been half-closed by the opposite endpoint.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Shared output buffer #writeCompleted fails to signal the end of the stream correctly
  when there is no buffered data.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Corrected handling of invalid HTTP protocol version by HTTP/1.1 async client
  protocol handler.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Corrected state tracking of pipelined message exchanges by HTTP/1.1 async client
  protocol handler.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* HTTP/1.1 server protocol handler to use exception callback to report exceptions that cannot
  be handled by individual exchange handlers.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: ServerHttp1StreamHandler throws an NPE when attempting to handle a corrupt/invalid
  incoming request message head.
  Contributed by Oleg Kalnichevski <olegk at apache.org>


Release 5.3.3
------------------

This maintenance release fixes a defect in how asynchronous SSL sessions handle an overflow
condition when encrypting application data. There have also been several fixes for edge
cases related to handling HTTP/1.1 asynchronous connections half-closed by the opposite
endpoint.


Change Log
-------------------

* Bug fix: Shared input buffer to propagate aborted status as I/O interrupted exception.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Half-closed SSL sessions must not shut down until explicitly closed by
  the application (protocol) layer.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Corrected shutdown of asynchronous HTTP/1.1 connections half-closed by the opposite
  endpoint.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Made shared output buffer #writeCompleted block until the end of a stream has been
  written out.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* HTTPCORE-775: Fixed handling SSLEngineResult#BUFFER_OVERFLOW of by asynchronous SSLIOSession#write
  Contributed by Andriy Redko <drreta at gmail.com>

* Bug fix: In some edge cases, the request may still not be fully completed while
  the response has already been fully committed by the HTTP/1.1 stream handler. Connections
  that cannot be kept alive must be closed only once both request and response streams are
  fully complete.
  Contributed by Oleg Kalnichevski <olegk at apache.org>


Release 5.3.2
------------------

This maintenance release corrects several major defects in the HTTP/2 protocol
code reported since the 5.3.1 release.


Change Log
-------------------

* HTTPCORE-774: Fixed a race condition caused by concurrent update of the connection input
  window to the max value.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Optimize connection close logic to resolve timeout delay issue (#508).
  Contributed by Noah <yuns994@gmail.com>

* Bug fix: Update the pointer of H2 continuation's headerBuffer after copying the payload
  (#507).
  Contributed by CoolTomatos <24667806+cooltomatos@users.noreply.github.com>

* Removed workaround for an incompatibility in HTTP/2 frame management with older versions
  of Nginx.
  Contributed by Oleg Kalnichevski <olegk at apache.org>


Release 5.3.1
------------------

This is a maintenance release that corrects several defects found since 5.3 release
including an HTTP/2 protocol handler failure to notify the opposite endpoint when using
non-default dynamic table sizes.


Change Log
-------------------

* Bug fix: Allow `Host` headers in HTTP/2 request messages.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Fixed the HTTP/1.1 async protocol handler incorrectly reporting its state
  as CLOSED immediately after its instantiation until the #onConnect event has been
  triggered.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* HTTPCORE-771: Ignore java.lang.UnsupportedOperationException when gracefully shutting
  down classic SSL sockets for compatibility with Oracle JDK 1.8.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: HTTP/2 protocol handler fails to notify the opposite endpoint when correctly
  using non-default dynamic table sizes.
  Contributed by Brendan Thomas <brendan.thomas at adaptiva.com>

* Bug fix: Moved HTTP/2 illegal message header check from message converters to protocol
  interceptors.
  Contributed by Oleg Kalnichevski <olegk at apache.org>

* Bug fix: Corrected error handling in AbstractAsyncPushHandler
